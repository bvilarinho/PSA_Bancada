<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebApp Diagnóstico</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js" rel="stylesheet"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<script>
    function atualizarDados() {
        var maquina = document.getElementById("maquinas").options[document.getElementById("maquinas").selectedIndex].value;
        var componentes = document.getElementById("componentes").options[document.getElementById("componentes").selectedIndex].value;
        var tipoSensor = document.getElementById("tipoSensor").options[document.getElementById("tipoSensor").selectedIndex].value;
        $.get("http://localhost:3000/getInfoDB/" + maquina + "/" + componentes + "/" + tipoSensor, function (data, status) {
            alert("Data: " + data + "\nStatus: " + status);
        }).fail(function(err){
            alert("Erro: " + err.status + " | " + err.statusText);
            console.log(err)
        });
    }

    function enviarDados() {
        var maquina = document.getElementById("maquinas").options[document.getElementById("maquinas").selectedIndex].value;
        var componentes = document.getElementById("componentes").options[document.getElementById("componentes").selectedIndex].value;
        var tipoSensor = document.getElementById("tipoSensor").options[document.getElementById("tipoSensor").selectedIndex].value;
        $.get("http://localhost:3000/getInfoDB/" + maquina + "/" + componentes + "/" + tipoSensor, function (data, status) {
            alert("Data: " + data + "\nStatus: " + status);
        }).fail(function(err){
            alert("Erro: " + err.status + " | " + err.statusText);
            console.log(err)
        });
    }
</script>

<body>
    <nav class="navbar fixed-top navbar-dark bg-dark">
        <div class="container">
            <div style="float: left; margin-left:100px">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent">
                    <span class="navbar-toggler-icon"></span>
                </button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="#dados">Dados dos sensores</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#detalhes">Detalhes</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#observações">Observações anteriores</a>
                            </li>
                        </ul>
                    </div>
            </div>
            <h1 class="header" style="padding-top:10px">Diagnóstico</h1>
            <h1><img class="header" style="height: 50px; margin-left:550px; margin-right:150px" src="logo.svg" alt=""></h1>
        </div>
    </nav>
    <div class="topper" id="dados">
        <div>
            <h3 style="text-align: center; width:300px; margin-top:-400px; margin-left: 575px; display: block"> Dados dos sensores </h3>
        </div>
        <div style="margin-left:-850px;" id="curve_chart"></div>
        <div class="options" style="width: 300px; margin: 0px 150px 0px 0px">
            <div style="width: 210px; height: 70px; margin: 10px 10px 0px 10px">
                <label style="font-weight: bolder;" for="maquinas">Escolha uma máquina:</label>
                <select name="maquinas" id="maquinas">
                    <option value="tapete">Tapete</option>
                    <option value="central hidraulica ">Central Hidráulica</option>
                    <option value="mesa gravacao a laser">Mesa Gravação a Laser</option>
                </select>
            </div>
            <div style="width: 210px; height: 70px; margin: 10px 10px 0px 10px">
                <label style="font-weight: bolder;" for="componentes">Escolha um componente:</label>
                <select name="componentes" id="componentes">
                    <option value="estrutura">Estrutura</option>
                    <option value="motor ac">Motor AC</option>
                </select>
            </div>
            <div style="width: 210px; height: 70px; margin: 10px 10px 0px 10px">
                <label style="font-weight: bolder;" for="tipoSensor">Escolha um tipo de dados:</label>
                <select name="tipoSensor" id="tipoSensor">
                    <option value="caudal">Caudal</option>
                    <option value="temperatura">Temperatura</option>
                    <option value="pressao">Pressão</option>
                    <option value="vibracao">Vibração</option>
                    <option value="ruido">Ruido</option>
                    <option value="qualidade do ar">Qualidade do Ar</option>
                    <option value="co2">Níveis de CO2</option>
                </select>
            </div>
            <div style="width: 210px; height: 25px; margin: 10px 10px 10px 10px">
                    <button style="color:blue" type="button" onclick="atualizarDados()">Atualizar Dados</button>
            </div>
            <div style="width: 260px">
                <div style="float:left; margin: 10px 10px 10px 10px; text-align: center">
                    <b> Início: </b>
                    <p><input id="data_inicio" type="date"></p>
                </div>
                <div style="float:right; margin: 10px 10px 10px 10px; text-align: center">
                    <b> Fim: </b>
                    <p><input id="data_fim" type="date"></p>
                </div>
            </div>
            <div style="width: 210px;  margin: 10px 0px 0px 10px">
                <b> Obervações: </b>
            </div>
            <div style="margin: 10px 0px 0px 10px">
                <input id="observacoes" type="text" size="28"  height="10" minlength="0" maxlength="300">
            </div>
            <div style="width: 210px; margin: 10px 0px 0px 10px">
                <button style="color:blue" type="button" onclick="enviarDados()"> Send </button>
            </div>
        </div>
    </div>
    <div class="middle" id="detalhes">
        <div>
            <h3 style="text-align: center; margin: auto; padding-top:50px; display: block"> Detalhes </h3>
        </div>
        <div style="float:left; height: 200px; width: 425px; padding-top:50px; margin-left:0px; margin-bottom:50px">
            <div>
                <img src="info.png" alt="Alertas" width="100" height="100" style="margin:auto; display: block">
            </div>
            <div style="text-align: center; margin-top:30px">
                <h4> Informações </h4>
                <h6 style="padding-top:10px"> Maquina: </h6>
                <h6 style="padding-top:1px"> Componente: </h6>
                <h6 style="padding-top:1px"> ID: </h6>
            </div>
        </div>
        <div style="float:right; height: 200px; width: 400px; padding-top:50px; margin-left:px; margin-bottom:50px">
            <div>
                <img src="alerta.png" alt="Alertas" width="100" height="100" style="margin:auto; display: block">
            </div>
            <div style="text-align: center; margin-top:30px">
                <h4> Alertas </h4>
                <h6 style="padding-top:10px"> Temperatura alta !! </h6>
            </div>
        </div>
        <div style="float:left; height: 200px; width: 580px; padding-top:50px; margin-right:0px">
            <div>
                <img src="Manutenção.png" alt="Manutenção" width="100" height="100" style="margin:auto; display: block">
            </div>
            <div style="padding-top:20px; margin-top:10px">
                <div style="text-align: center; width:250px; float:left; margin-left:40px">
                    <h4> Última Manutenção </h4>
                    <h6 style="padding-top:10px"> DD/MM/AA </h6>
                </div>
                <div style="text-align: center; width:250px; float:right; margin-right:40px">
                    <h4> Próxima Manutenção </h4>
                    <h6 style="padding-top:10px"> DD/MM/AA </h6>
                </div>
            </div>
        </div>
    </div>
    <div class="bottom" style="height:400px" id="observações">
        <div>
            <h3 style="text-align: center; padding-top:50px; margin-top:-200px; margin-left:560px; display: block"> Observações anteriores </h3>
        </div>
    </div>
    <nav class="navbar fixed-bottom navbar-dark bg-dark">
        <div class="container">
            <h6 class="footer" style="padding-top:10px">&copy;PSA - Projeto em Sistemas de Automação</h6>
        </div>
    </nav>
</body>
</html>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
        google.charts.load('current', { 'packages': ['corechart'] });
        google.charts.setOnLoadCallback(drawChart);
        function drawChart() {
            var data = google.visualization.arrayToDataTable([
                ['Data', 'Temperatura (m3)', 'Caudal (bar)'],
                ['04/14', 0.5, 3],
                ['05/14', 1, 3.5],
                ['06/14', .8, 4],
                ['07/14', .6, 5]
            ]);

            var options = {
                curveType: 'function',
                titleTextStyle: { fontSize: '25' },
                legend: { position: 'top', maxLines: 4 }
            };

            var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

            chart.draw(data, options);
        }
</script>
